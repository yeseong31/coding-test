# [Gold III] 이분탐색의 흔적 - 32179 

[문제 링크](https://www.acmicpc.net/problem/32179) 

### 성능 요약

메모리: 14512 KB, 시간: 104 ms

### 분류

수학, 구현, 이분 탐색, 시뮬레이션, 조합론

### 제출 일자

2025년 11월 9일 22:46:11

### 문제 설명

<p>건이와 준성이는 오름차순으로 정렬된 길이가 $N$인 배열 $A = [a_1,a_2,\cdots,a_N]$를 보며 게임을 한다. 준성이는 배열의 원소 중 무작위로 하나를 선택한다. 답 구간은 준성이가 선택한 원소가 존재할 수 있는 인덱스의 구간을 의미하며, 처음에는 $[1,N]$으로 시작한다.</p>

<p>건이는 준성이에게 가능한 답 구간의 원소를 선택해 생각한 숫자가 이 원소가 맞냐고 질문할 수 있다. 준성이는 그에 따라 <em>Yes, Up, Down </em>중 하나를 답한다. 준성이는 거짓말을 하지 않으며 준성이가<em> Yes</em>를 답할 때 게임은 종료된다. 이때 건이가 부른 $K$개 원소들을 순서대로 나열한 배열 $[t_1,t_2,\cdots,t_K]$를 이분탐색의 흔적이라 한다.</p>

<p>건이는 모든 게임에서 항상 최선의 선택을 하기 때문에 가능한 답 구간이 $[s,e]$일 때 항상 $a_{s + \left \lfloor \frac{e-s}{2}\right\rfloor}$를 물어본다. </p>

<ul>
	<li>이후 준성이가 <em>Up</em>을 답했을 때, 다음 구간은 $[s +\left \lfloor \frac{e-s}{2}\right\rfloor +1 ,e]$이 된다.</li>
	<li>이후 준성이가 <em>Down</em>을 답했을 때, 다음 구간은 $[s,s + \left \lfloor \frac{e-s}{2}\right\rfloor-1]$이 된다.</li>
</ul>

<p>이분탐색의 흔적이 주어졌을 때, 배열 $A$로 가능한 배열의 개수를 출력해 보자.</p>

### 입력 

 <p>첫 번째 줄에 배열의 크기 $N$과 이분탐색의 흔적의 크기 $K$가 공백으로 구분되어 주어진다.</p>

<p>두 번째 줄에 이분탐색의 흔적을 나타내는 정수 $t_1,t_2,\cdots,t_K$가 공백으로 구분되어 주어진다.</p>

### 출력 

 <p>배열 $A$로 가능한 배열의 개수를 $1\,000\,000\,007(= 10^9 + 7)$로 나눈 값을 출력한다.</p>

